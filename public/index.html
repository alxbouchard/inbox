<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InBox ‚Äì Centralisation des factures</title>
    <link rel="stylesheet" href="src/styles.css" />
  </head>
  <body>
    <div class="app" data-view="list">
      <aside class="primary-rail" aria-label="Navigation principale">
        <div class="primary-rail__brand" aria-label="InBox">
          <span class="brand-mark">INBoX</span>
        </div>
        <nav class="primary-rail__nav" aria-label="Collections">
          <button class="rail-button is-active" type="button" data-section="collections" aria-pressed="true">
            <span aria-hidden="true">üìÑ</span>
            <span class="rail-label">Collections</span>
          </button>
          <button class="rail-button" type="button" data-section="tags">
            <span aria-hidden="true">üè∑Ô∏è</span>
            <span class="rail-label">Tags</span>
          </button>
          <button class="rail-button" type="button" data-section="recent">
            <span aria-hidden="true">üïí</span>
            <span class="rail-label">Recent</span>
          </button>
          <button class="rail-button" type="button" data-section="starred">
            <span aria-hidden="true">‚≠ê</span>
            <span class="rail-label">Starred</span>
          </button>
          <button class="rail-button" type="button" data-section="trash">
            <span aria-hidden="true">üóëÔ∏è</span>
            <span class="rail-label">Trash</span>
          </button>
        </nav>
        <div class="primary-rail__actions">
          <button class="upload-button" type="button" id="newUploadButton">
            <span aria-hidden="true">‚¨ÜÔ∏è</span>
            <span class="rail-label">Upload</span>
          </button>
        </div>
      </aside>

      <main class="workspace" aria-label="Espace de travail">
        <header class="workspace__header">

          <div class="workspace__intro">
            <p class="workspace__eyebrow">Welcome to the new Inbox web app.</p>
            <h1 class="workspace__title">InBox</h1>
            <p class="workspace__lead">
              InBox creates a single place to store all your documents. It is as simple as forwarding every receipt by text message
              or email&mdash;no application to install.
            </p>
            <p class="workspace__lead">
              Add the Inbox email address and phone number to your contacts and you are set. Send anything important for future
              review, organise everything with tags, or invite your assistant to collect the right details and approve with a
              single click.
            </p>
            <div class="workspace__highlights" role="list">
              <article class="highlight-card" role="listitem">
                <h3 class="highlight-card__title">Capture</h3>
                <p class="highlight-card__copy">Send invoices from SMS or email straight into your Inbox workspace.</p>
              </article>
              <article class="highlight-card" role="listitem">
                <h3 class="highlight-card__title">Organise</h3>
                <p class="highlight-card__copy">Scroll through every document, drag tags, and fine tune the OCR fields.</p>
              </article>
              <article class="highlight-card" role="listitem">
                <h3 class="highlight-card__title">Approve</h3>
                <p class="highlight-card__copy">Move items to review or approve instantly once everything looks right.</p>
              </article>
            </div>
          </div>
          <div class="workspace__controls">
            <div class="workspace__control-card" role="search">
              <div class="search-group">
                <label class="field" for="searchInput">
                  <span class="field__icon" aria-hidden="true">üîç</span>
                  <input
                    id="searchInput"
                    type="search"
                    placeholder="Rechercher fournisseur, montant, date ou tag"
                    autocomplete="off"
                  />
                </label>
                <button class="ghost-button" type="button" id="clearSearchButton" aria-label="Effacer la recherche">‚úï</button>
              </div>
              <div class="filter-group" role="group" aria-label="Filtres">
                <label class="filter">
                  <span>Statut</span>
                  <select id="statusFilter">
                    <option value="all">Tous</option>
                    <option value="nouvelle">Nouvelles</option>
                    <option value="a_verifier">√Ä v√©rifier</option>
                    <option value="complete">Compl√®tes</option>
                    <option value="archive">Archiv√©es</option>
                    <option value="ocr_error">Erreur OCR</option>
                  </select>
                </label>
                <label class="filter">
                  <span>Tag</span>
                  <select id="tagFilter">
                    <option value="all">Tous les tags</option>
                  </select>
                </label>
                <label class="filter">
                  <span>P√©riode</span>
                  <select id="periodFilter">
                    <option value="all">Toute p√©riode</option>
                    <option value="today">Aujourd'hui</option>
                    <option value="7d">7 derniers jours</option>
                    <option value="30d">30 derniers jours</option>
                  </select>
                </label>
              </div>
              <p class="workspace__control-hint">Filtrez par statut, p√©riode ou tag pour concentrer votre revue.</p>
            </div>

          <div class="search-group">
            <label class="field" for="searchInput">
              <span class="field__icon" aria-hidden="true">üîç</span>
              <input
                id="searchInput"
                type="search"
                placeholder="Rechercher fournisseur, montant, date ou tag"
                autocomplete="off"
              />
            </label>
            <button class="ghost-button" type="button" id="clearSearchButton" aria-label="Effacer la recherche">‚úï</button>
          </div>
          <div class="filter-group" role="group" aria-label="Filtres">
            <label class="filter">
              <span>Statut</span>
              <select id="statusFilter">
                <option value="all">Tous</option>
                <option value="nouvelle">Nouvelles</option>
                <option value="a_verifier">√Ä v√©rifier</option>
                <option value="complete">Compl√®tes</option>
                <option value="archive">Archiv√©es</option>
                <option value="ocr_error">Erreur OCR</option>
              </select>
            </label>
            <label class="filter">
              <span>Tag</span>
              <select id="tagFilter">
                <option value="all">Tous les tags</option>
              </select>
            </label>
            <label class="filter">
              <span>P√©riode</span>
              <select id="periodFilter">
                <option value="all">Toute p√©riode</option>
                <option value="today">Aujourd'hui</option>
                <option value="7d">7 derniers jours</option>
                <option value="30d">30 derniers jours</option>
              </select>
            </label>

          </div>
        </header>

        <div class="workspace__body">
          <section class="inbox" aria-label="Liste des factures">
            <header class="inbox__header">
              <h1>Inbox</h1>
              <p class="inbox__hint">Glissez une facture vers un tag pour l'appliquer en lot.</p>
            </header>
            <ul class="inbox__list" id="invoiceList" role="list"></ul>
            <p class="empty-state" id="emptyState" hidden>Aucun r√©sultat. Essayez d'ajuster vos filtres.</p>
          </section>

          <section class="invoice" aria-live="polite">
            <header class="invoice__header">
              <div class="invoice__meta">
                <p class="invoice__vendor" id="invoiceVendor">S√©lectionnez une facture</p>
                <p class="invoice__summary" id="invoiceSummary">Choisissez un √©l√©ment dans la liste pour afficher les d√©tails.</p>
              </div>
              <div class="invoice__status" id="statusChip"></div>
            </header>
            <div class="invoice__columns">
              <aside class="tag-panel" aria-label="Panneau de tags">
                <div class="tag-panel__actions">
                  <button class="tag-button tag-button--add" type="button" id="addTagButton" aria-label="Cr√©er un nouveau tag">Ôºã</button>
                  <div class="tag-button tag-button--remove" id="removeTagDropzone" role="button" aria-label="Zone de suppression">
                    <span aria-hidden="true">‚àí</span>
                    <span class="tag-button__label">Supprimer</span>
                  </div>
                </div>
                <ul class="tag-panel__list" id="tagList" role="listbox" aria-label="Tags disponibles"></ul>
              </aside>

              <div class="invoice__main">
                <div class="preview" aria-label="Pr√©visualisation de la facture">
                  <div class="preview__stage" id="previewStage" role="button" tabindex="0" aria-label="D√©poser un tag ici pour l'appliquer">
                    <div class="preview__media" id="previewMedia" role="img" aria-live="polite"></div>
                    <div class="applied-tags" id="appliedTags" aria-label="Tags appliqu√©s"></div>
                    <p class="preview__hint" id="previewHint">D√©posez un tag pour l'appliquer.</p>
                  </div>
                  <div class="review-bar">
                    <div class="review-bar__info">
                      <p id="invoiceChannel" class="review-bar__channel"></p>
                      <p id="invoiceTimestamp" class="review-bar__time"></p>
                    </div>
                    <div class="review-bar__actions">
                      <button class="pill-button" type="button" id="sendToReviewButton">Marquer √† v√©rifier</button>
                      <button class="pill-button pill-button--primary" type="button" id="markCompleteButton">Marquer comme compl√©t√©e</button>
                    </div>
                  </div>
                </div>
              </div>

              <aside class="inspector" aria-label="Collaboration et champs OCR">

              <div class="preview" aria-label="Pr√©visualisation de la facture">
                <div class="preview__stage" id="previewStage" role="button" tabindex="0" aria-label="D√©poser un tag ici pour l'appliquer">
                  <div class="preview__media" id="previewMedia" role="img" aria-live="polite"></div>
                  <div class="applied-tags" id="appliedTags" aria-label="Tags appliqu√©s"></div>
                  <p class="preview__hint" id="previewHint">D√©posez un tag pour l'appliquer.</p>
                </div>
                <div class="review-bar">
                  <div class="review-bar__info">
                    <p id="invoiceChannel" class="review-bar__channel"></p>
                    <p id="invoiceTimestamp" class="review-bar__time"></p>
                  </div>
                  <div class="review-bar__actions">
                    <button class="pill-button" type="button" id="sendToReviewButton">Marquer √† v√©rifier</button>
                    <button class="pill-button pill-button--primary" type="button" id="markCompleteButton">Marquer comme compl√©t√©e</button>
                  </div>
                </div>

                <section class="chat" aria-label="Fil de discussion">
                  <header class="chat__header">
                    <h2>Chat</h2>
                    <p id="chatPartner" class="chat__partner"></p>
                  </header>
                  <ul class="chat__messages" id="chatMessages" role="list"></ul>
                  <form class="chat__composer" id="chatForm" novalidate>
                    <label class="field chat__input">
                      <input
                        type="text"
                        id="chatInput"
                        name="message"
                        autocomplete="off"
                        placeholder="R√©pondre‚Ä¶"
                        aria-label="√âcrire un message"
                      />
                    </label>
                    <button class="pill-button pill-button--primary" type="submit">Envoyer</button>
                  </form>
                </section>

                <section class="ocr-panel" aria-label="Champs OCR">
                  <header class="ocr-panel__header">
                    <h2>Champs extraits</h2>
                    <p class="ocr-panel__hint">Corrigez les valeurs et marquez-les comme confirm√©es.</p>
                  </header>
                  <ul class="ocr-panel__list" id="ocrFieldList"></ul>
                </section>

              </div>

              <aside class="ocr-panel" aria-label="Champs OCR">
                <header class="ocr-panel__header">
                  <h2>Champs extraits</h2>
                  <p class="ocr-panel__hint">Corrigez les valeurs et marquez-les comme confirm√©es.</p>
                </header>
                <ul class="ocr-panel__list" id="ocrFieldList"></ul>

              </aside>
            </div>
          </section>
        </div>
      </main>
    </div>

    <div class="toast-container" id="toastContainer" role="status" aria-live="assertive"></div>

    <template id="invoiceRowTemplate">
      <li class="inbox-item">
        <button class="inbox-item__button" type="button">
          <div class="inbox-item__top">
            <span class="inbox-item__time"></span>
            <span class="status-indicator"></span>
          </div>
          <p class="inbox-item__title"></p>
          <div class="inbox-item__meta">
            <span class="inbox-item__from"></span>
            <span class="inbox-item__amount"></span>
          </div>
          <div class="inbox-item__tags"></div>
        </button>
      </li>
    </template>

    <template id="tagTemplate">
      <li class="tag-item">
        <button class="tag-pill" type="button" draggable="true"></button>
      </li>
    </template>

    <template id="ocrFieldTemplate">
      <li class="ocr-field">
        <article class="ocr-pill">
          <header class="ocr-pill__header">
            <span class="ocr-pill__label"></span>
            <span class="ocr-pill__confidence"></span>
          </header>
          <div class="ocr-pill__body">
            <input class="ocr-pill__input" type="text" />
            <button class="ocr-pill__confirm" type="button" aria-pressed="false">Confirmer</button>
          </div>
        </article>
      </li>
    </template>

    <template id="chatMessageTemplate">
      <li class="chat-message">
        <div class="chat-bubble">
          <p class="chat-bubble__text"></p>
          <span class="chat-bubble__meta"></span>
        </div>
      </li>
    </template>

    <template id="appliedTagTemplate">
      <button class="applied-tag" type="button" draggable="true"></button>
    </template>

    <dialog class="modal" id="newInvoiceDialog" aria-labelledby="newInvoiceTitle">
      <form class="modal__form" id="newInvoiceForm" method="dialog">
        <header class="modal__header">
          <h2 id="newInvoiceTitle">Ajouter une facture</h2>
          <p class="modal__intro">Renseignez les informations essentielles pour ajouter une facture dans l'inbox.</p>
        </header>
        <div class="modal__grid">
          <label class="modal__field">
            <span>Fournisseur</span>
            <input type="text" name="vendor" required placeholder="Ex. Hydro-Qu√©bec" />
          </label>
          <label class="modal__field">
            <span>Montant (CAD)</span>
            <input type="number" name="amount" step="0.01" min="0" placeholder="0.00" />
          </label>
          <label class="modal__field">
            <span>Date de facture</span>
            <input type="date" name="invoiceDate" />
          </label>
          <label class="modal__field">
            <span>Canal</span>
            <select name="source">
              <option value="upload">Upload manuel</option>
              <option value="sms">SMS</option>
              <option value="email">Courriel</option>
            </select>
          </label>
          <label class="modal__field">
            <span>M√©thode de paiement</span>
            <input type="text" name="paymentMethod" placeholder="Visa ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 1234" />
          </label>
          <label class="modal__field">
            <span>URL d'aper√ßu</span>
            <input type="url" name="previewUrl" placeholder="https://" />
          </label>
          <label class="modal__field">
            <span>Exp√©diteur</span>
            <select name="senderUserId">
              <option value="">‚Äî</option>
              <option value="user-submit-1">Julien Morin</option>
              <option value="user-submit-2">Sara Blanchette</option>
            </select>
          </label>
          <label class="modal__field modal__field--wide">
            <span>Notes</span>
            <textarea name="notes" rows="3" placeholder="Contexte, projet, instructions"></textarea>
          </label>
        </div>
        <div class="modal__actions">
          <button type="reset" class="pill-button">Annuler</button>
          <button type="submit" class="pill-button pill-button--primary">Cr√©er</button>
        </div>
      </form>
    </dialog>

    <script src="src/app.js" type="module"></script>
  </body>
</html>
